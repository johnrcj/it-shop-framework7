</div>
</div>
</div>
</div>
<div class="quick-nav-overlay"></div>
<script src="<?=base_url()?>assets/global/plugins/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/jquery-validation/js/additional-methods.min.js" type="text/javascript"></script>
<script src="<?= base_url() ?>assets/global/plugins/bootstrap-summernote/summernote.min.js" type="text/javascript"></script>

<script src="<?=base_url()?>assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>

<script src="<?=base_url()?>assets/global/plugins/ckeditor/ckeditor.js" type="text/javascript"></script>

<script src="<?=base_url()?>assets/global/scripts/app.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/bootstrap-sweetalert/sweetalert.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/bootstrap-toastr/toastr.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/pages/scripts/ui-toastr.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/js/common.js" type="text/javascript"></script>

<script src="<?=base_url()?>assets/global/plugins/respond.min.js"></script>
<script src="<?=base_url()?>assets/global/plugins/excanvas.min.js"></script>
<script src="<?=base_url()?>assets/global/plugins/ie8.fix.min.js"></script>
<script src="<?=base_url()?>assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/scripts/datatable.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/pages/scripts/components-date-time-pickers.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/pages/scripts/table-datatables-ajax.min.js" type="text/javascript"></script>
<!--<script src="--><?//=base_url()?><!--assets/pages/scripts/charts-amcharts.min.js" type="text/javascript"></script>-->
<script src="<?=base_url()?>assets/global/plugins/amcharts/amcharts/amcharts.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/amcharts/amcharts/serial.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/amcharts/amcharts/pie.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/amcharts/amcharts/radar.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/amcharts/amcharts/themes/light.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/amcharts/amcharts/themes/patterns.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/amcharts/amcharts/themes/chalk.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/amcharts/ammap/ammap.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/amcharts/amstockcharts/amstock.js" type="text/javascript"></script>

<script src="<?=base_url()?>assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/layouts/layout/scripts/demo.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/layouts/global/scripts/quick-nav.min.js" type="text/javascript"></script>
<!-- END THEME LAYOUT SCRIPTS -->

<script src="<?=base_url()?>assets/global/plugins/ckeditor/ckeditor.js" type="text/javascript"></script>

<script src="<?=base_url()?>assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/icheck/icheck.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/pages/scripts/form-icheck.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/js/three.min.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/js/sphoords.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/js/PhotoSphereViewer.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/js/PSVNavBar.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/js/PSVNavBarButton.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/jquery-multi-select/js/jquery.multi-select.js" type="text/javascript"></script>
<script src="<?=base_url()?>assets/global/plugins/moment.min.js"></script>
<!--<script src="--><?//=base_url()?><!--assets/pages/scripts/form-input-mask.min.js" type="text/javascript"></script>-->
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN THEME LAYOUT SCRIPTS -->

<a class="btn blue btn-outline sbold hidden" data-toggle="modal" href="#modal_manager_setting" id="btn_show_manager_setting_modal"></a>
<div class="modal fade" id="modal_manager_setting" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <div class="row" style="padding: 20px;padding-bottom: 0px;">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-3">
                                <span style="font-size: 14px;line-height: 42px;float: right"><?=$this->lang->line("id")?></span>
                            </div>
                            <div class="col-md-9">
                                <input class="form-control" style="background-color: white;height: 38px;" id="manager_id">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-3">
                                <span style="font-size: 14px;line-height: 42px;float: right"><?=$this->lang->line("old_password")?></span>
                            </div>
                            <div class="col-md-9">
                                <input type="password" class="form-control" style="background-color: white;height: 38px;" id="manager_old_password">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-3">
                                <span style="font-size: 14px;line-height: 42px;float: right"><?=$this->lang->line("new_password")?></span>
                            </div>
                            <div class="col-md-9">
                                <input type="password" class="form-control" style="background-color: white;height: 38px;" id="manager_new_password">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-3">
                                <span style="font-size: 14px;line-height: 42px;float: right"><?=$this->lang->line("new_password_confirm")?></span>
                            </div>
                            <div class="col-md-9">
                                <input type="password" class="form-control" style="background-color: white;height: 38px;" id="manager_new_password_confirm">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" style="width: 100px;" class="btn btn-sm green" onclick="SaveManagerSetting()"><i class="fa fa-save"></i>&nbsp;<?=$this->lang->line("confirm")?></button>
                <button type="button" style="width: 100px;" class="btn btn-sm btn-danger btn-outline" data-dismiss="modal" id="btn_modal_manager_setting_cancel"><i class="fa fa-close"></i>&nbsp;<?=$this->lang->line("cancel")?></button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<script>
    var ComponentsSelect = function() {
        var handleDemo = function(id, placehold_str) {
            $.fn.select2.defaults.set("theme", "bootstrap");

            $("#"+id).select2({
                placeholder: placehold_str,
                width: null,
                minimumResultsForSearch: -1
            });

            $("#"+id).on("select2:open", function() {
                if ($(this).parents("[class*='has-']").length) {
                    var classNames = $(this).parents("[class*='has-']")[0].className.split(/\s+/);

                    for (var i = 0; i < classNames.length; ++i) {
                        if (classNames[i].match("has-")) {
                            $("body > .select2-container").addClass(classNames[i]);
                        }
                    }
                }
            });
        }

        return {
            init: function(id,placehold_str) {
                handleDemo(id,placehold_str);
            }
        };

    }();

    var ComponentsSelectFromObj = function() {
        var handleDemo = function(obj, placehold_str) {
            $.fn.select2.defaults.set("theme", "bootstrap");

            $(obj).select2({
                placeholder: placehold_str,
                width: null,
                minimumResultsForSearch: -1
            });

            $(obj).on("select2:open", function() {
                if ($(this).parents("[class*='has-']").length) {
                    var classNames = $(this).parents("[class*='has-']")[0].className.split(/\s+/);

                    for (var i = 0; i < classNames.length; ++i) {
                        if (classNames[i].match("has-")) {
                            $("body > .select2-container").addClass(classNames[i]);
                        }
                    }
                }
            });
        }

        return {
            init: function(obj,placehold_str) {
                handleDemo(obj,placehold_str);
            }
        };

    }();

    function ShowManagerSettingDialog(){
        $('#btn_show_manager_setting_modal').trigger("click");
    }

    function SaveManagerSetting(){
        if($('#manager_id').val() == "" || $('#manager_new_password').val() == ""|| $('#manager_old_password').val() == ""){
            showNotification("Warning","Please input all fields.","warning");
            return;
        }

        if($('#manager_new_password').val() != $('#manager_new_password_confirm').val()){
            showNotification("Warning","Please check password.<br>Password is not equal.","warning");
            return;
        }

        $.ajax({
            type:'post',
            url:'<?=site_url("Login/change_manager_info")?>',
            data: {
                id: $('#manager_id').val(),
                old_password: $('#manager_old_password').val(),
                new_password: $('#manager_new_password').val()
            },
            beforeSend:function() {
                App.blockUI({
                    animate: true,
                    target: '#login_form',
                    boxed: false
                });
            },
            success:function(data){
                App.unblockUI('#total_body');
                if(data == "success"){
                    $('#btn_modal_manager_setting_cancel').trigger("click");
                    showNotification("Success","<?=$this->lang->line('operation_success')?>","success");
                    $('.headerbar_admin_id').html($('#manager_id').val());
                } else if(data == "error_old_password") {
                    showNotification("Error","<?=$this->lang->line('password_is_incorrect')?>","error");
                } else{
                    showNotification("Error","<?=$this->lang->line('operation_failed')?>","error");
                }
            }
        })
    }

    function isURL(str) {
        var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
            '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name and extension
            '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
            '(\\:\\d+)?'+ // port
            '(\\/[-a-z\\d%@_.~+&:]*)*'+ // path
            '(\\?[;&a-z\\d%@_.,~+&:=-]*)?'+ // query string
            '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
        return pattern.test(str);
    }
</script>
</body>

</html>