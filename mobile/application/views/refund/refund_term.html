<template>
    <div class="page" data-name="refund_term">
        <div class="top-navbar-panel main fixed">
            <div class="main-topbar relative underline">
                <div @click="onBack" class="left link">
                    <img class="ic_back" src="assets/images/btn_back.png">
                </div>
                <div class="search-panel flex flex-1 flex-col items-center justify-center">
                    <div class="text-5vw">{{$root.lang['terms']}}</div>
                </div>
            </div>
        </div>

        <div class="page-content top-navbar-content-panel">
            <div class="toolbar tabbar toolbar-panel">
                <div class="toolbar-inner">
                    {{#js_if 'this.nes_title.length > 0'}}
                    <a href="#tab-1" class="tab-link {{#js_if 'this.firstTab == 1'}}tab-link-active{{/js_if}}">{{this.nes_title}}</a>
                    {{/js_if}}
                    {{#js_if 'this.opt_title1.length > 0'}}
                    <a href="#tab-2" class="tab-link {{#js_if 'this.firstTab == 2'}}tab-link-active{{/js_if}}">{{this.opt_title1}}</a>
                    {{/js_if}}
                    {{#js_if 'this.opt_title2.length > 0'}}
                    <a href="#tab-3" class="tab-link {{#js_if 'this.firstTab == 3'}}tab-link-active{{/js_if}}">{{this.opt_title2}}</a>
                    {{/js_if}}
                    {{#js_if 'this.opt_title3.length > 0'}}
                    <a href="#tab-4" class="tab-link {{#js_if 'this.firstTab == 4'}}tab-link-active{{/js_if}}">{{this.opt_title3}}</a>
                    {{/js_if}}
                    {{#js_if 'this.opt_title4.length > 0'}}
                    <a href="#tab-5" class="tab-link {{#js_if 'this.firstTab == 5'}}tab-link-active{{/js_if}}">{{this.opt_title4}}</a>
                    {{/js_if}}
                </div>
            </div>
            <div class="tabs-animated-wrap not-animated">
                <div class="tabs">
                    <div id="tab-1" class="page-content tab {{#js_if 'this.firstTab == 1'}}tab-active{{/js_if}}">
                        <div class="textarea-panel h-full readonly">
                            <textarea readonly>{{this.nes_content}}</textarea>
                        </div>
                    </div>
                    <div id="tab-2" class="page-content tab {{#js_if 'this.firstTab == 2'}}tab-active{{/js_if}}">
                        <div class="textarea-panel h-full readonly">
                            <textarea readonly>{{this.opt_content1}}</textarea>
                        </div>
                    </div>
                    <div id="tab-3" class="page-content tab {{#js_if 'this.firstTab == 3'}}tab-active{{/js_if}}">
                        <div class="textarea-panel h-full readonly">
                            <textarea readonly>{{this.opt_content2}}</textarea>
                        </div>
                    </div>
                    <div id="tab-4" class="page-content tab {{#js_if 'this.firstTab == 4'}}tab-active{{/js_if}}">
                        <div class="textarea-panel h-full readonly">
                            <textarea readonly>{{this.opt_content3}}</textarea>
                        </div>
                    </div>
                    <div id="tab-5" class="page-content tab {{#js_if 'this.firstTab == 5'}}tab-active{{/js_if}}">
                        <div class="textarea-panel h-full readonly">
                            <textarea readonly>{{this.opt_content4}}</textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
    return {
        data: function () {
            return {
                firstTab: this.$route.query.tab,
                nes_title: "",
                nes_content: "",
                opt_title1: "",
                opt_content1: "",
                opt_title2: "",
                opt_content2: "",
                opt_title3: "",
                opt_content3: "",
                opt_title4: "",
                opt_content4: "",
            }
        },
        methods: {
            onBack: function () {
                back();
            },

            loadPageInfo: function () {
                let self = this;

                request('/Term/get_refund_term_content', {
                    }, function (result) {
                        if (result.code === self.$root.CONST.RES_SUCCESS) {
                            self.$setState({
                                nes_title: result.nes_title,
                                nes_content: result.nes_content,
                                opt_title1: result.opt_title1,
                                opt_content1: result.opt_content1,
                                opt_title2: result.opt_title2,
                                opt_content2: result.opt_content2,
                                opt_title3: result.opt_title3,
                                opt_content3: result.opt_content3,
                                opt_title4: result.opt_title4,
                                opt_content4: result.opt_content4,
                            });
                        } else {
                            showToast(result.msg);
                        }
                    })
            },
        },
        on: {
            pageInit: function (page) {
                let self = this;

                hideMainBottomMenu();
                self.loadPageInfo();
            }
        }
    }
</script>